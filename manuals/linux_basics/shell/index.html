<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.83.1"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=../../../favicons/favicon.ico><link rel=apple-touch-icon href=../../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../../favicons/android-192x192.png sizes=192x192><title>Shell Bootcamp | HPCC</title><meta property="og:title" content="Shell Bootcamp"><meta property="og:description" content="The Unix Shell When you log into UNIX/LINUX system, then is starts a program called the Shell. It provides you with a working environment and interface to the operating system. Usually there are several different shell programs installed. The shell program bash is one of the most common ones.
finger <user_name> # shows which shell you are using chsh -l # gives list of shell programs available on your system (does not work on all UNIX variants) <shell_name> # switches to different shell STDIN, STDOUT, STDERR, Redirections, and Wildcards See LINUX HOWTOs"><meta property="og:type" content="article"><meta property="og:url" content="https://dev.hpcc.ucr.edu/manuals/linux_basics/shell/"><meta property="article:section" content="Manuals"><meta property="article:modified_time" content="2021-07-07T11:59:03-07:00"><meta property="og:site_name" content="HPCC"><meta itemprop=name content="Shell Bootcamp"><meta itemprop=description content="The Unix Shell When you log into UNIX/LINUX system, then is starts a program called the Shell. It provides you with a working environment and interface to the operating system. Usually there are several different shell programs installed. The shell program bash is one of the most common ones.
finger <user_name> # shows which shell you are using chsh -l # gives list of shell programs available on your system (does not work on all UNIX variants) <shell_name> # switches to different shell STDIN, STDOUT, STDERR, Redirections, and Wildcards See LINUX HOWTOs"><meta itemprop=dateModified content="2021-07-07T11:59:03-07:00"><meta itemprop=wordCount content="2427"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Shell Bootcamp"><meta name=twitter:description content="The Unix Shell When you log into UNIX/LINUX system, then is starts a program called the Shell. It provides you with a working environment and interface to the operating system. Usually there are several different shell programs installed. The shell program bash is one of the most common ones.
finger <user_name> # shows which shell you are using chsh -l # gives list of shell programs available on your system (does not work on all UNIX variants) <shell_name> # switches to different shell STDIN, STDOUT, STDERR, Redirections, and Wildcards See LINUX HOWTOs"><link rel=preload href=../../../scss/main.min.e8d637f30893e85918b2aeae9cd9eab6c68fcd7998810e804d7c9ab542fbfd45.css as=style><link href=../../../scss/main.min.e8d637f30893e85918b2aeae9cd9eab6c68fcd7998810e804d7c9ab542fbfd45.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script><link rel=stylesheet href=../../../css/prism.css><script src=../../../js/driver0.9.8.min.js></script><link rel=stylesheet href=../../../css/driver0.9.8.min.css><link rel=stylesheet href=../../../css/site.css><script src=../../../js/site.js></script></head><body class="td-page line-numbers"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../../><span class=font-weight-bold>HPCC</span></a>
<row class=header-switch><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=sidebarSwitch checked>
<label class=custom-control-label for=sidebarSwitch>sidebar</label></div><div class="custom-control custom-switch"><input type=checkbox class=custom-control-input id=tocSwitch checked>
<label class=custom-control-label for=tocSwitch>toc</label></div></row><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../about id=navbarDropdown role=button>About</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../about/facility/ style=padding-left:1rem;font-weight:calc(3/3*500)>Facility</a>
<a class=dropdown-item href=../../../about/hardware/ style=padding-left:1rem;font-weight:calc(3/3*500)>Hardware</a>
<a class=dropdown-item href=../../../about/software/ style=padding-left:1rem;font-weight:calc(3/3*500)>Software</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../community id=navbarDropdown role=button>Community</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../community/events_small/ style=padding-left:1rem;font-weight:calc(3/3*500)>Small Events</a>
<a class=dropdown-item href=../../../community/events_related/ style=padding-left:1rem;font-weight:calc(3/3*500)>Related Events</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../related/ id=navbarDropdown role=button>Related</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=https://research.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>RED-UCR</a>
<a class=dropdown-item href=http://datascience.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>Data Science Center</a>
<a class=dropdown-item href=http://bigdata.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>FIELDS Program</a>
<a class=dropdown-item href=http://genomics.ucr.edu style=padding-left:1rem;font-weight:calc(3/3*500)>Institute of Integrative Genome Biology</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0" style=position:relative><a class="nav-link dropdown-toggle" href=../../../manuals id=navbarDropdown role=button>Manuals</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=../../../manuals/linux_basics/ style=padding-left:1rem;font-weight:calc(3/3*500)>Linux Basics</a>
<a class=dropdown-item href=../../../manuals/hpc_cluster/ style=padding-left:1rem;font-weight:calc(3/3*500)>HPC Cluster</a>
<a class=dropdown-item href=../../../manuals/hpcc_cloud/ style=padding-left:1rem;font-weight:calc(3/3*500)>HPCC Cloud</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.51745df3d90400849bd7002eb4f28f2d.json data-offline-search-base-href=../../../ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center d-lg-none"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off data-offline-search-index-json-src=../../../offline-search-index.51745df3d90400849bd7002eb4f28f2d.json data-offline-search-base-href=../../../ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Manuals</a></li><ul><li class="collapse show" id=manuals><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/linux_basics/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Linux Basics</a></li><ul><li class="collapse show" id=manualslinux_basics><a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsintro href=../../../manuals/linux_basics/intro/>Access</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicscmdline_basics href=../../../manuals/linux_basics/cmdline_basics/>Command Line Basics</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsfilesystems href=../../../manuals/linux_basics/filesystems/>File Systems and Transfers</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicspermissions href=../../../manuals/linux_basics/permissions/>Permissions and Ownership</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsfinding_things href=../../../manuals/linux_basics/finding_things/>Finding Things</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicstext href=../../../manuals/linux_basics/text/>Text Editors</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsstreams href=../../../manuals/linux_basics/streams/>Streams</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicspipes href=../../../manuals/linux_basics/pipes/>Piping</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsvariables href=../../../manuals/linux_basics/variables/>Variables</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsscripting href=../../../manuals/linux_basics/scripting/>Scripting</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualslinux_basicsprocesses href=../../../manuals/linux_basics/processes/>Process Management</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-manualslinux_basicsshell href=../../../manuals/linux_basics/shell/>Shell Bootcamp</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/hpc_cluster/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">HPC Cluster</a></li><ul><li class=collapse id=manualshpc_cluster><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterintro href=../../../manuals/hpc_cluster/intro/>Introduction</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterstart href=../../../manuals/hpc_cluster/start/>Getting Started</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterjobs href=../../../manuals/hpc_cluster/jobs/>Managing Jobs</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterqueue href=../../../manuals/hpc_cluster/queue/>Queue Policies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterpackage_manage href=../../../manuals/hpc_cluster/package_manage/>Package Management</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterstorage href=../../../manuals/hpc_cluster/storage/>Data Storage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustersharing href=../../../manuals/hpc_cluster/sharing/>Sharing Data</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustersecurity href=../../../manuals/hpc_cluster/security/>Data Security</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterusers href=../../../manuals/hpc_cluster/users/>Communicating</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterterminalide href=../../../manuals/hpc_cluster/terminalide/>Terminal-based Working Environments</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clusterparallelr href=../../../manuals/hpc_cluster/parallelr/>Parallel Evaluations in R</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/hpc_cluster/sshkeys/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SSH Keys</a></li><ul><li class=collapse id=manualshpc_clustersshkeys><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustersshkeyssshkeys_macos href=../../../manuals/hpc_cluster/sshkeys/sshkeys_macos/>SSH Keys Apple macOS</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustersshkeyssshkeys_winos href=../../../manuals/hpc_cluster/sshkeys/sshkeys_winos/>SSH Keys Microsoft Windows</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpc_clustervisual href=../../../manuals/hpc_cluster/visual/>Visualization</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=../../../manuals/hpcc_cloud/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">hpcc-cloud</a></li><ul><li class=collapse id=manualshpcc_cloud><a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_create-acct href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_create-acct/>Account Creation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_egress href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_egress/>Account Egress Waiver</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_operation href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_operation/>Cluster Operation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_billing href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_billing/>Cost Control and Billing</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_setup href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_setup/>HPCC cfnCluster Setup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-manualshpcc_cloudmanuals_hpcc-aws-cluster_intro href=../../../manuals/hpcc_cloud/manuals_hpcc-aws-cluster_intro/>Introduction</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><nav id=TableOfContents><ul><li><a href=#the-unix-shell>The Unix Shell</a><ul><li><a href=#stdin-stdout-stderr-redirections-and-wildcards>STDIN, STDOUT, STDERR, Redirections, and Wildcards</a></li><li><a href=#useful-shell-commands>Useful shell commands</a></li></ul></li><li><a href=#screen>Screen</a><ul><li><a href=#starting-a-new-screen-session>Starting a New Screen Session</a></li><li><a href=#attaching-to-screen-sessions>Attaching to Screen Sessions</a></li><li><a href=#destroying-screen-sessions>Destroying Screen Sessions</a></li><li><a href=#tabs-and-a-reasonably-large-history-buffer>Tabs and a Reasonably Large History Buffer</a></li></ul></li><li><a href=#simple-one-liner-shell-scripts>Simple One-Liner Shell Scripts</a><ul><li><a href=#how-to-write-a-real-shell-script>How to write a real shell script</a></li></ul></li><li><a href=#simple-one-liner-perl-scripts>Simple One-Liner Perl Scripts</a></li><li><a href=#remote-copy-wget-scp-ncftp>Remote Copy: wget, scp, ncftp</a><ul><li><a href=#wget>Wget</a></li><li><a href=#scp>SCP</a></li><li><a href=#nice-ftp>Nice FTP</a></li></ul></li><li><a href=#archiving-and-compressing>Archiving and Compressing</a><ul><li><a href=#creating-archives>Creating Archives</a></li><li><a href=#viewing-archives>Viewing Archives</a></li><li><a href=#extracting-archives>Extracting Archives</a></li></ul></li><li><a href=#simple-installs>Simple Installs</a><ul><li><a href=#systems-wide-installations>Systems-wide installations</a></li><li><a href=#applications-in-user-accounts>Applications in user accounts</a></li><li><a href=#installation-of-rpms>Installation of RPMs</a></li></ul></li><li><a href=#environment-variables>Environment Variables</a></li><li><a href=#exercises>Exercises</a><ul><li><a href=#exercise-1>Exercise 1</a></li><li><a href=#exercise-2>Exercise 2</a></li><li><a href=#exercise-3>Exercise 3</a></li><li><a href=#exercise-4>Exercise 4</a></li><li><a href=#exercise-5>Exercise 5</a></li><li><a href=#exercise-6>Exercise 6</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://dev.hpcc.ucr.edu/manuals/>Manuals</a></li><li class=breadcrumb-item><a href=https://dev.hpcc.ucr.edu/manuals/linux_basics/>Linux Basics</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://dev.hpcc.ucr.edu/manuals/linux_basics/shell/>Shell Bootcamp</a></li></ol></nav><div class=td-content><h1>Shell Bootcamp</h1><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i> 12 minute read</p><h2 id=the-unix-shell>The Unix Shell</h2><p>When you log into UNIX/LINUX system, then is starts a program called the Shell. It provides you with a working environment and interface to the operating system. Usually there are several different shell programs installed. The shell program bash is one of the most common ones.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>finger &lt;user_name&gt; <span style=color:#8f5902;font-style:italic># shows which shell you are using</span>
chsh -l <span style=color:#8f5902;font-style:italic># gives list of shell programs available on your system (does not work on all UNIX variants)</span>
&lt;shell_name&gt; <span style=color:#8f5902;font-style:italic># switches to different shell</span>
</code></pre></div><h3 id=stdin-stdout-stderr-redirections-and-wildcards>STDIN, STDOUT, STDERR, Redirections, and Wildcards</h3><p>See <a href=http://www.tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html>LINUX HOWTOs</a></p><p>By default, UNIX commands read from standard input (STDIN) and send their output to standard out (STDOUT).</p><p>You can redirect them by using the following commands:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&lt;beginning-of-filename&gt;*         <span style=color:#8f5902;font-style:italic># * is wildcard to specify many files</span>
ls &gt; file                        <span style=color:#8f5902;font-style:italic># prints ls output into specified file</span>
<span style=color:#204a87>command</span> &lt; my_file                <span style=color:#8f5902;font-style:italic># uses file after &#39;&lt;&#39; as STDIN</span>
<span style=color:#204a87>command</span> &gt;&gt; my_file               <span style=color:#8f5902;font-style:italic># appends output of one command to file</span>
<span style=color:#204a87>command</span> <span style=color:#000;font-weight:700>|</span> tee my_file            <span style=color:#8f5902;font-style:italic># writes STDOUT to file and prints it to screen</span>
<span style=color:#204a87>command</span> &gt; my_file<span style=color:#000;font-weight:700>;</span> cat my_file   <span style=color:#8f5902;font-style:italic># writes STDOUT to file and prints it to screen</span>
<span style=color:#204a87>command</span> &gt; /dev/null              <span style=color:#8f5902;font-style:italic># turns off progress info of applications by redirecting</span>
                                 <span style=color:#8f5902;font-style:italic># their output to /dev/null</span>
grep my_pattern my_file <span style=color:#000;font-weight:700>|</span> wc     <span style=color:#8f5902;font-style:italic># Pipes (|) output of &#39;grep&#39; into &#39;wc&#39;</span>
grep my_pattern my_non_existing_file <span style=color:#0000cf;font-weight:700>2</span> &gt; my_stderr <span style=color:#8f5902;font-style:italic># prints STDERR to file</span>
</code></pre></div><h3 id=useful-shell-commands>Useful shell commands</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat &lt;file1&gt; &lt;file2&gt; &gt; &lt;cat.out&gt;      <span style=color:#8f5902;font-style:italic># concatenate files in output file &#39;cat.out&#39;</span>
paste &lt;file1&gt; &lt;file2&gt; &gt; &lt;paste.out&gt;  <span style=color:#8f5902;font-style:italic># merges lines of files and separates them by tabs (useful for tables)</span>
cmp &lt;file1&gt; &lt;file2&gt;                  <span style=color:#8f5902;font-style:italic># tells you whether two files are identical</span>
diff &lt;fileA&gt; &lt;fileB&gt;                 <span style=color:#8f5902;font-style:italic># finds differences between two files</span>
head -&lt;number&gt; &lt;file&gt;                <span style=color:#8f5902;font-style:italic># prints first lines of a file</span>
tail -&lt;number&gt; &lt;file&gt;                <span style=color:#8f5902;font-style:italic># prints last lines of a file</span>
split -l &lt;number&gt; &lt;file&gt;             <span style=color:#8f5902;font-style:italic># splits lines of file into many smaller ones</span>
csplit -f out fasta_batch <span style=color:#4e9a06>&#34;%^&gt;%&#34;</span> <span style=color:#4e9a06>&#34;/^&gt;/&#34;</span> <span style=color:#4e9a06>&#34;{*}&#34;</span> <span style=color:#8f5902;font-style:italic># splits fasta batch file into many files</span>
                                     <span style=color:#8f5902;font-style:italic># at &#39;&gt;&#39;</span>
sort &lt;file&gt;                          <span style=color:#8f5902;font-style:italic># sorts single file, many files and can merge (-m)</span>
                                     <span style=color:#8f5902;font-style:italic># them, -b ignores leading white space, ...</span>
sort -k 2,2 -k 3,3n input_file &gt; output_file <span style=color:#8f5902;font-style:italic># sorts in table column 2 alphabetically and</span>
                                     <span style=color:#8f5902;font-style:italic># column 3 numerically, &#39;-k&#39; for column, &#39;-n&#39; for</span>
                                     <span style=color:#8f5902;font-style:italic># numeric</span>
sort input_file <span style=color:#000;font-weight:700>|</span> uniq &gt; output_file <span style=color:#8f5902;font-style:italic># uniq command removes duplicates and creates file/table</span>
                                     <span style=color:#8f5902;font-style:italic># with unique lines/fields</span>
join -1 <span style=color:#0000cf;font-weight:700>1</span> -2 <span style=color:#0000cf;font-weight:700>1</span> &lt;table1&gt; &lt;table2&gt;     <span style=color:#8f5902;font-style:italic># joins two tables based on specified column numbers</span>
                                     <span style=color:#8f5902;font-style:italic># (-1 file1, 1: col1; -2: file2, col2). It assumes</span>
                                     <span style=color:#8f5902;font-style:italic># that join fields are sorted. If that is not the case,</span>
                                     <span style=color:#8f5902;font-style:italic># use the next command:</span>
sort table1 &gt; table1a<span style=color:#000;font-weight:700>;</span> sort table2 &gt; table2a<span style=color:#000;font-weight:700>;</span> join -a <span style=color:#0000cf;font-weight:700>1</span> -t <span style=color:#4e9a06>&#34;</span><span style=color:#204a87;font-weight:700>$(</span><span style=color:#204a87>echo</span> -e <span style=color:#4e9a06>&#39;\t&#39;</span><span style=color:#204a87;font-weight:700>)</span><span style=color:#4e9a06>&#34;</span> table1a table2a &gt; table3                               <span style=color:#8f5902;font-style:italic># &#39;-a &lt;table&gt;&#39; prints all lines of specified table!</span>
                                     <span style=color:#8f5902;font-style:italic># Default prints only all lines the two tables have in</span>
                                     <span style=color:#8f5902;font-style:italic># common. &#39;-t &#34;$(echo -e &#39;\t&#39;)&#34; -&gt;&#39; forces join to</span>
                                     <span style=color:#8f5902;font-style:italic># use tabs as field separator in its output. Default is</span>
                                     <span style=color:#8f5902;font-style:italic># space(s)!!!</span>
cat my_table <span style=color:#000;font-weight:700>|</span> cut -d , -f1-3        <span style=color:#8f5902;font-style:italic># cut command prints only specified sections of a table,</span>
                                     <span style=color:#8f5902;font-style:italic># -d specifies here comma as column separator (tab is</span>
                                     <span style=color:#8f5902;font-style:italic># default), -f specifies column numbers.</span>
grep                                 <span style=color:#8f5902;font-style:italic># see chapter 4</span>
egrep                                <span style=color:#8f5902;font-style:italic># see chapter 4</span>
</code></pre></div><h2 id=screen>Screen</h2><p>Screen references</p><ol><li><a href=http://fosswire.com/post/2008/08/video-tutorial-getting-started-with-gnu-screen/>Screen Turorial</a></li><li><a href=http://aperiodic.net/screen/quick_reference>Screen Cheat Sheet</a></li></ol><h3 id=starting-a-new-screen-session>Starting a New Screen Session</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>screen                 <span style=color:#8f5902;font-style:italic># Start a new session</span>
screen -S &lt;some-name&gt;  <span style=color:#8f5902;font-style:italic># Start a new session and gives it a name</span>
</code></pre></div><p>Commands to Control Screen</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Ctrl-a d <span style=color:#8f5902;font-style:italic>#  Detach from the screen session</span>
Ctrl-a c <span style=color:#8f5902;font-style:italic># Create a new window inside the screen session</span>
Ctrl-a Space <span style=color:#8f5902;font-style:italic># Switch to the next window</span>
Ctrl-a a <span style=color:#8f5902;font-style:italic># Switch to the window that you were previously on</span>
Ctrl-a <span style=color:#4e9a06>&#34; # List all open windows. Double-quotes &#34;</span> are typed with the Shift key
Ctrl-d or <span style=color:#204a87>type</span> <span style=color:#204a87>exit</span> <span style=color:#8f5902;font-style:italic># Exit out of the current window. Exiting form the last window will end the screen session</span>
Ctrl-a <span style=color:#ce5c00;font-weight:700>[</span> <span style=color:#8f5902;font-style:italic># Enters the scrolling mode. Use Page Up and Page Down keys to scroll through the window. Hit the Enter key twice to return to normal mode.</span>
</code></pre></div><h3 id=attaching-to-screen-sessions>Attaching to Screen Sessions</h3><p>From any computer, you can attach to a screen session after SSH-ing into a server.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>screen -r              <span style=color:#8f5902;font-style:italic># Attaches to an existing session, if there is only one</span>
screen -r              <span style=color:#8f5902;font-style:italic># Lists available sessions and their names, if there are more then one session running</span>
screen -r &lt;some-name&gt;  <span style=color:#8f5902;font-style:italic># Attaches to a specific session</span>
screen -r &lt;first-few-letters-of-name&gt; <span style=color:#8f5902;font-style:italic># Type just the first few letters of the name</span>
                       <span style=color:#8f5902;font-style:italic># and you will be attached to the session you need</span>
</code></pre></div><h3 id=destroying-screen-sessions>Destroying Screen Sessions</h3><ol><li>Terminate all programs that are running in the screen session. The standard way to do that is: <code>Ctrl-c</code></li><li>Exit out of your shell: <code>exit</code></li><li>Repeat steps 1 and 2 until you see the message: <code>[screen is terminating]</code></li></ol><p>There may be programs running in different windows of the same screen session. That&rsquo;s why you may need to terminate programs and exit shells multiple time.</p><h3 id=tabs-and-a-reasonably-large-history-buffer>Tabs and a Reasonably Large History Buffer</h3><p>For a better experience with screen, run</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp ~/.screenrc ~/.screenrc.backup 2&gt; /dev/null
<span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#39;startup_message off
</span><span style=color:#4e9a06>defscrollback 10240
</span><span style=color:#4e9a06>caption always &#34;%{=b dy}{ %{= dm}%H %{=b dy}}%={ %?%{= dc}%-Lw%?%{+b dy}(%{-b r}%n:%t%{+b dy})%?(%u)%?%{-dc}%?%{= dc}%+Lw%? %{=b dy}}&#34;
</span><span style=color:#4e9a06>&#39;</span> &gt; ~/.screenrc
</code></pre></div><h2 id=simple-one-liner-shell-scripts>Simple One-Liner Shell Scripts</h2><p>Web page for <a href=http://linuxcommand.org/script_library.php>script download</a>.</p><p>Renames many files *.old to *.new. To test things first, replace &lsquo;do mv&rsquo; with &lsquo;do echo mv&rsquo;:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.input<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> mv <span style=color:#000>$i</span> <span style=color:#4e9a06>${</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>/</span><span style=color:#4e9a06>\.</span><span style=color:#000>old</span><span style=color:#000;font-weight:700>/</span><span style=color:#4e9a06>\.</span><span style=color:#000>new</span><span style=color:#4e9a06>}</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
<span style=color:#204a87;font-weight:700>for</span> i in *<span style=color:#4e9a06>\ </span>*<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> mv <span style=color:#4e9a06>&#34;</span><span style=color:#000>$i</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>// /_</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span> <span style=color:#8f5902;font-style:italic># Replaces spaces in files by underscores</span>
</code></pre></div><p>Run an application in loops on many input files:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.input<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> ./application <span style=color:#000>$i</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div><p>Run fastacmd from BLAST program in loops on many *.input files and create corresponding *.out files:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.input<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> fastacmd -d /data/../database_name -i <span style=color:#000>$i</span> &gt; <span style=color:#000>$i</span>.out<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div><p>Run SAM&rsquo;s target99 on many input files:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.pep<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> target99 -db /usr/../database_name -seed <span style=color:#000>$i</span> -out <span style=color:#000>$i</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
Search in many files <span style=color:#204a87;font-weight:700>for</span> a pattern and print occurrences together with file names.
<span style=color:#204a87;font-weight:700>for</span> j in <span style=color:#0000cf;font-weight:700>0</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#0000cf;font-weight:700>3</span> <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#0000cf;font-weight:700>5</span> <span style=color:#0000cf;font-weight:700>6</span> <span style=color:#0000cf;font-weight:700>7</span> <span style=color:#0000cf;font-weight:700>8</span> 9<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> grep -iH &lt;my_pattern&gt; *<span style=color:#000>$j</span>.seq<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div><p>Example of how to run an interactive application (tmpred) that asks for file name input/output:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.pep<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> <span style=color:#204a87>echo</span> -e <span style=color:#4e9a06>&#34;</span><span style=color:#000>$i</span><span style=color:#4e9a06>\n\n17\n33\n\n\n&#34;</span> <span style=color:#000;font-weight:700>|</span> ./tmpred <span style=color:#000>$i</span> &gt; <span style=color:#000>$i</span>.out<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div><p>Run BLAST2 for all <em>.fasa1/</em>.fasta2 file pairs in the order specified by file names and write results into one file:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.fasta1<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> blast2 -p blastp -i <span style=color:#000>$i</span> -j <span style=color:#4e9a06>${</span><span style=color:#000>i</span><span style=color:#000;font-weight:700>/_*fasta1/_*fasta2</span><span style=color:#4e9a06>}</span> &gt;&gt; my_out_file<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div><pre><code>This example uses two variables in a for loop. The content of the second variable gets specified in each loop by a replace function.
</code></pre><p>Runs BLAST2 in all-against-all mode and writes results into one file ('-F F' turns low-complexity filter off):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.fasta<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> <span style=color:#204a87;font-weight:700>for</span> j in *.fasta<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> blast2 -p blastp -F F -i <span style=color:#000>$i</span> -j <span style=color:#000>$j</span> &gt;&gt; my_out_file<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span><span style=color:#000;font-weight:700>;</span>
</code></pre></div><h3 id=how-to-write-a-real-shell-script>How to write a real shell script</h3><ol><li><p>Create file which contains an interpreter as the first line:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span></code></pre></div></li><li><p>Place shell commands in file below the interpreter line using a text editor.</p></li><li><p>Make file executable:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chmod +x my_shell_script
</code></pre></div></li><li><p>Run shell script like this:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./my_shell_script
</code></pre></div></li><li><p>Place it into your /rhome/<username>/bin directory</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir -p ~/bin
mv my_shell_script ~/bin/
</code></pre></div></li><li><p>Add the bin path to your shell permanently:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#39;export PATH=~/bin:$PATH&#39;</span> &gt;&gt; ~/.bashrc
<span style=color:#204a87>source</span> ~/.bashrc
</code></pre></div></li></ol><h2 id=simple-one-liner-perl-scripts>Simple One-Liner Perl Scripts</h2><p><em>Small collection of useful one-liners:</em></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=color:#000>perl</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>p</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>i</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>w</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#000>e</span> <span style=color:#4e9a06>&#39;s/pattern1/pattern2/g&#39;</span> <span style=color:#000>my_input_file</span>
            <span style=color:#8f5902;font-style:italic># Replaces a pattern in a file by a another pattern using regular expressions.</span>
            <span style=color:#8f5902;font-style:italic># $1 or \1: back-references to pattern placed in parentheses</span>
            <span style=color:#8f5902;font-style:italic># -p: lets perl know to write program</span>
            <span style=color:#8f5902;font-style:italic># -i.bak: creates backup file *.bak, only -i doesn&#39;t</span>
            <span style=color:#8f5902;font-style:italic># -w: turns on warnings</span>
            <span style=color:#8f5902;font-style:italic># -e: executable code follows</span>
</code></pre></div><p><em>Parse lines based on patterns:</em></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-perl data-lang=perl><span style=color:#000>perl</span> <span style=color:#ce5c00;font-weight:700>-</span><span style=color:#204a87;font-weight:700>ne</span> <span style=color:#4e9a06>&#39;print if (/my_pattern1/ ? ($c=1) : (--$c &gt; 0)); print if (/my_pattern2/ ? ($d = 1) : (--$d &gt; 0))&#39;</span> <span style=color:#000>my_infile</span> <span style=color:#ce5c00;font-weight:700>&gt;</span> <span style=color:#000>my_outfile</span>
            <span style=color:#8f5902;font-style:italic># Parses lines that contain pattern1 and pattern2.</span>
            <span style=color:#8f5902;font-style:italic># The following lines after the pattern can be specified in &#39;$c=1&#39; and &#39;$d=1&#39;.</span>
            <span style=color:#8f5902;font-style:italic># For logical OR use this syntax: &#39;/(pattern1|pattern2)/&#39;.</span>
</code></pre></div><h2 id=remote-copy-wget-scp-ncftp>Remote Copy: wget, scp, ncftp</h2><h3 id=wget>Wget</h3><p>Use wget to download a file from the web:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget ftp://ftp.ncbi.nih.... <span style=color:#8f5902;font-style:italic># file download from www; add option &#39;-r&#39; to download entire directories</span>
</code></pre></div><h3 id=scp>SCP</h3><p>Use scp to copy files between machines (ie. laptop to server):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>scp <span style=color:#204a87>source</span> target <span style=color:#8f5902;font-style:italic># Use form &#39;userid@machine_name&#39; if your local and remote user ids are different.</span>
                  <span style=color:#8f5902;font-style:italic># If they are the same you can use only &#39;machine_name&#39;.</span>
</code></pre></div><p>Here are more scp examples:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>scp user@remote_host:file.name . <span style=color:#8f5902;font-style:italic># Copies file from server to local machine (type from local</span>
                                 <span style=color:#8f5902;font-style:italic># machine prompt). The &#39;.&#39; copies to pwd, you can specify                                              # here any directory, use wildcards to copy many files.</span>

scp file.name user@remote_host:~/dir/newfile.name
                                                                       <span style=color:#8f5902;font-style:italic># Copies file from local machine to server.</span>

scp -r user@remote_host:directory/ ~/dir
                                 <span style=color:#8f5902;font-style:italic># Copies entire directory from server to local machine.</span>
</code></pre></div><h3 id=nice-ftp>Nice FTP</h3><p>From the linux command line run ncftp and use it to get files:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ncftp
ncftp&gt; open ftp.ncbi.nih.gov
ncftp&gt; <span style=color:#204a87>cd</span> /blast/executables
ncftp&gt; get blast.linux.tar.Z <span style=color:#ce5c00;font-weight:700>(</span>skip extension: @<span style=color:#ce5c00;font-weight:700>)</span>
ncftp&gt; bye
</code></pre></div><h2 id=archiving-and-compressing>Archiving and Compressing</h2><h3 id=creating-archives>Creating Archives</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tar -cvf my_file.tar mydir/    <span style=color:#8f5902;font-style:italic># Builds tar archive of files or directories. For directories, execute command in parent directory. Don&#39;t use absolute path.    </span>
tar -czvf my_file.tgz mydir/   <span style=color:#8f5902;font-style:italic># Builds tar archive with compression of files or directories. For</span>
                               <span style=color:#8f5902;font-style:italic># directories, execute command in parent directory. Don&#39;t use absolute path.</span>
zip -r mydir.zip mydir/        <span style=color:#8f5902;font-style:italic># Command to archive a directory (here mydir) with zip.</span>
tar -jcvf mydir.tar.bz2 mydir/ <span style=color:#8f5902;font-style:italic># Creates *.tar.bz2 archive</span>
</code></pre></div><h3 id=viewing-archives>Viewing Archives</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tar -tvf my_file.tar
tar -tzvf my_file.tgz
</code></pre></div><h3 id=extracting-archives>Extracting Archives</h3><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tar -xvf my_file.tar
tar -xzvf my_file.tgz
gunzip my_file.tar.gz <span style=color:#8f5902;font-style:italic># or unzip my_file.zip, uncompress my_file.Z,</span>
                      <span style=color:#8f5902;font-style:italic># or bunzip2 for file.tar.bz2</span>
find -name <span style=color:#4e9a06>&#39;*.zip&#39;</span> <span style=color:#000;font-weight:700>|</span> xargs -n <span style=color:#0000cf;font-weight:700>1</span> unzip <span style=color:#8f5902;font-style:italic># this command usually works for unzipping</span>
                      <span style=color:#8f5902;font-style:italic># many files that were compressed under Windows</span>
tar -jxvf mydir.tar.bz2 <span style=color:#8f5902;font-style:italic># Extracts *.tar.bz2 archive</span>
</code></pre></div><p>Try also:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tar zxf blast.linux.tar.Z
tar xvzf file.tgz
</code></pre></div><p>Important options:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>f: use archive file
p: preserve permissions
v: list files processed
x: exclude files listed in FILE
z: filter the archive through gzip
</code></pre></div><h2 id=simple-installs>Simple Installs</h2><h3 id=systems-wide-installations>Systems-wide installations</h3><h3 id=applications-in-user-accounts>Applications in user accounts</h3><h3 id=installation-of-rpms>Installation of RPMs</h3><h2 id=environment-variables>Environment Variables</h2><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>xhost user@host                <span style=color:#8f5902;font-style:italic># adds X permissions for user on server.</span>
<span style=color:#204a87>echo</span> <span style=color:#000>$DISPLAY</span>                  <span style=color:#8f5902;font-style:italic># shows current display settings</span>
<span style=color:#204a87>export</span> <span style=color:#000>DISPLAY</span><span style=color:#ce5c00;font-weight:700>=</span>&lt;local_IP&gt;:0    <span style=color:#8f5902;font-style:italic># change environment variable</span>
unsetenv DISPLAY               <span style=color:#8f5902;font-style:italic># removes display variable</span>
env                            <span style=color:#8f5902;font-style:italic># prints all environment variables</span>
</code></pre></div><p>List of directories that the shell will search when you type a command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>echo</span> <span style=color:#000>$PATH</span>
</code></pre></div><p>You can edit your default DISPLAY setting for your account by adding it to file .bash_profile</p><h2 id=exercises>Exercises</h2><h3 id=exercise-1>Exercise 1</h3><ol><li><p>Download proteome of Halobacterium spec. with wget and look at it:</p><pre><code>module load ncbi-blast/2.2.26 # Loads legacy blastall
wget ftp://ftp.ncbi.nlm.nih.gov/genomes/genbank/archaea/Halobacterium_salinarum/representative/GCA_000069025.1_ASM6902v1/GCA_000069025.1_ASM6902v1_protein.faa.gz
gunzip GCA_000069025.1_ASM6902v1_protein.faa.gz
mv GCA_000069025.1_ASM6902v1_protein.faa AE004437.faa
less AE004437.faa  # press q to quit
</code></pre></li><li><p>Simple Analysis:</p><p>a. How many predicted proteins are there?</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>grep <span style=color:#4e9a06>&#39;^&gt;&#39;</span> AE004437.faa --count
</code></pre></div><p>b. How many proteins contain the pattern &ldquo;WxHxxH&rdquo; or &ldquo;WxHxxHH&rdquo;?</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>egrep <span style=color:#4e9a06>&#39;W.H..H{1,2}&#39;</span> AE004437.faa --count
</code></pre></div><p>c. Use the find function (/) in &lsquo;less&rsquo; to fish out the protein IDs containing the pattern or more elegantly do it with awk:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>awk --posix -v <span style=color:#000>RS</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;&gt;&#39;</span> <span style=color:#4e9a06>&#39;/W.H..(H){1,2}/ { print &#34;&gt;&#34; $0;}&#39;</span> AE004437.faa <span style=color:#000;font-weight:700>|</span> less <span style=color:#8f5902;font-style:italic># press q to quit</span>
</code></pre></div></li><li><p>Create a BLASTable database with formatdb:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ls <span style=color:#8f5902;font-style:italic># before</span>
formatdb -i AE004437.faa -p T -o T
ls <span style=color:#8f5902;font-style:italic># after</span>
<span style=color:#4e9a06>&#39;-p F&#39;</span> <span style=color:#204a87;font-weight:700>for</span> nucleotide and <span style=color:#4e9a06>&#39;-p T&#39;</span> <span style=color:#204a87;font-weight:700>for</span> protein database<span style=color:#000;font-weight:700>;</span> <span style=color:#4e9a06>&#39;-o T&#39;</span> parse SeqId and create indexes
</code></pre></div></li><li><p>Generate myseq.fasta</p><p>a. Generate list of sequence IDs for the above pattern match result (i.e. retrieve my_IDs from step 2c). Alternatively, download the pre-generated file with wget.</p><p>b. Retrieve the corresponding sequences for these IDs with the fastacmd command from the blastable database:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget https://cluster.hpcc.ucr.edu/~tgirke/Documents/UNIX/my_IDs
fastacmd -d AE004437.faa -i my_IDs &gt; myseq.fasta
less myseq.fasta <span style=color:#8f5902;font-style:italic># press q to quit</span>
</code></pre></div></li><li><p>(Optional) Looking at several different patterns:</p><p>a. Generate several lists of sequence IDs from various pattern match results (i.e. retrieve a.my_ids, b.my_ids, and c.my_ids from step 2c).</p><p>b. Retrieve the sequences in one step using the fastacmd in a for-loop:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87;font-weight:700>for</span> i in *.my_ids<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>do</span> fastacmd -d AE004437.faa -i <span style=color:#000>$i</span> &gt; <span style=color:#000>$i</span>.fasta<span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>done</span>
</code></pre></div></li><li><p>Run blastall with a few proteins in myseq.fasta against your newly created Halobacterium proteome database.</p><p>Create first a complete blast output file including alignments. In a second step use the &rsquo;m -8' option to obtain a tabular output (i.e. tab separated values):</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>blastall -p blastp -i myseq.fasta -d AE004437.faa -o blastp.out -e 1e-6 -v <span style=color:#0000cf;font-weight:700>10</span> -b <span style=color:#0000cf;font-weight:700>10</span>
blastall -p blastp -i myseq.fasta -d AE004437.faa -m <span style=color:#0000cf;font-weight:700>8</span> -e 1e-6 &gt; blastp.tab
less blastp.out <span style=color:#8f5902;font-style:italic># press q to quit</span>
less -S blastp.tab <span style=color:#8f5902;font-style:italic># -S disables line wrapping, press q to quit</span>
</code></pre></div><p>The filed descriptions of the Blast tabular output (from the &ldquo;-m 8&rdquo; option) are available here:</p><pre><code>1  Query (The query sequence id)
2  Subject (The matching subject sequence id)
3  % id
4  alignment length
5  mismatches
6  gap openings
7  q.start
8  q.end
9  s.start
10 s.end
11 e-value
12 bit score
</code></pre></li></ol><p>Is your blastp.out file equivalent to this one?</p><ol><li><p>Parse blastall output into Excel spread sheet</p><p>a. Using biocore parser</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>blastParse -i blastp.out -o blast.xls -c <span style=color:#0000cf;font-weight:700>5</span>
</code></pre></div><p>b. Using BioPerl parser</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bioblastParse.pl blastp.out &gt; blastparse.txt     
</code></pre></div></li></ol><h3 id=exercise-2>Exercise 2</h3><p>Split sample fasta batch file with csplit (use sequence file myseq.fasta from Exercise 1).</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>csplit -z myseq.fasta <span style=color:#4e9a06>&#39;/&gt;/&#39;</span> <span style=color:#4e9a06>&#39;{*}&#39;</span>
</code></pre></div><p>Delete some of the files generated by csplit
Concatenate single fasta files from (step 1) into to one file with cat (e.g. <code>cat file1 file2 file3 > bigfile</code>).
BLAST two related sequences, retrieve the result in tabular format and use <code>comm</code> to identify common hit IDs in the two tables.</p><h3 id=exercise-3>Exercise 3</h3><p>Run HMMPFAM search with proteins from Exercise 1 against Pfam database (will take ~3 minutes)</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hmmscan -E 0.1 --acc /srv/projects/db/pfam/2011-12-09-Pfam26.0/Pfam-A.hmm myseq.fasta &gt; output.pfam
</code></pre></div><p>Easier to parse/process tabular output</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hmmscan -E 0.1 --acc --tblout output.pfam /srv/projects/db/pfam/2011-12-09-Pfam26.0/Pfam-A.hmm myseq.fasta <span style=color:#8f5902;font-style:italic># also try --domtblout</span>
</code></pre></div><p>Which query got the most hits? How many hits were found that query?</p><h3 id=exercise-4>Exercise 4</h3><p>Create multiple alignment with ClustalW (e.g. use sequences with &lsquo;W.H..HH&rsquo; pattern)</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>clustalw myseq.fasta
mv myseq.aln myalign.aln
</code></pre></div><h3 id=exercise-5>Exercise 5</h3><p>Reformat alignment into PHYILIP format using &lsquo;seqret&rsquo; from EMBOSS</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>seqret clustal::myalign.aln phylip::myalign.phylip
</code></pre></div><h3 id=exercise-6>Exercise 6</h3><p>Create neighbor-joining tree with PHYLIP</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp myalign.phylip infile
protdist     <span style=color:#8f5902;font-style:italic># creates distance matrix (you may need to press &#39;R&#39; and then &#39;Y&#39;)</span>
cp outfile infile
neighbor     <span style=color:#8f5902;font-style:italic># use default settings (press &#39;Y&#39;)</span>
cp outtree intree
</code></pre></div><p>retree # displays tree and can use midpoint method for defining root of tree, my typical command sequence is: &lsquo;N&rsquo; (until you see PHYLIP) &lsquo;Y&rsquo; &lsquo;M&rsquo; &lsquo;W&rsquo; &lsquo;R&rsquo; &lsquo;R&rsquo; &lsquo;X&rsquo;</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp outtree tree.dnd
</code></pre></div><p>View your tree in TreeBrowse or open it in TreeView</p><div class="text-muted mt-5 pt-3 border-top">Last modified July 7, 2021: <a href=../../../commit/e80f5b3267e3e824c85fcc5aefd8d8a6140673b2>Added scripting page and set left menu order (e80f5b3)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Immediate Email Support" aria-label="Immediate Email Support"><a class=text-white target=_blank rel="noopener noreferrer" href=support@hpcc.ucr.edu><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/UCR_HPCC><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Stack Overflow" aria-label="Stack Overflow"><a class=text-white target=_blank rel="noopener noreferrer" href=https://ucr-hpcc.slack.com/><i class="fab fa-slack"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label><a class=text-white target=_blank rel="noopener noreferrer" href><i></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The Docsy Authors All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank>Privacy Policy</a></small><p class=mt-2><a href=../../../about/>About</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script>(function(){var c,a,b,d=document.getElementsByTagName('code');for(c=0;c<d.length;){if(b=d[c],b.parentNode.tagName!=='PRE'&&b.childElementCount===0)if(a=b.textContent,/^\$[^$]/.test(a)&&/[^$]\$$/.test(a)&&(a=a.replace(/^\$/,'\\(').replace(/\$$/,'\\)'),b.textContent=a),/^\\\((.|\s)+\\\)$/.test(a)||/^\\\[(.|\s)+\\\]$/.test(a)||/^\$(.|\s)+\$$/.test(a)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(a)){b.outerHTML=b.innerHTML;continue}c++}})()</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true }
    }
});
</script><script src=../../../js/main.min.63db3e552bd0543be17ce4a79a18b744e9cb72256bec42b540e3ab0cd43722d0.js integrity="sha256-Y9s+VSvQVDvhfOSnmhi3ROnLciVr7EK1QOOrDNQ3ItA=" crossorigin=anonymous></script><script src=../../../js/prism.js></script></body></html>